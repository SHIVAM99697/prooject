<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Kiss ðŸ’‹</title>

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

<style>
body{
  margin:0;
  background:#000;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Arial;
}
#wrap{
  position:relative;
  width:900px;
  height:500px;
}
video{
  position:absolute;
  left:0;
  width:450px;
  height:500px;
  object-fit:cover;
  transform:scaleX(-1);
}
#me{
  position:absolute;
  right:0;
  width:450px;
  height:500px;
  object-fit:cover;
}
#kiss{
  position:absolute;
  font-size:56px;
  display:none;
  filter:drop-shadow(0 0 14px hotpink);
}
#hint{
  position:absolute;
  top:-40px;
  width:100%;
  text-align:center;
  color:#fff;
}
#overlay{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.75);
  display:none;
  align-items:center;
  justify-content:center;
  color:#fff;
  font-size:28px;
}
button{
  position:absolute;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  padding:10px 30px;
  border:0;
  border-radius:30px;
  background:#ff2e63;
  color:#fff;
  font-size:18px;
  cursor:pointer;
}
</style>
</head>

<body>

<div id="wrap">
  <div id="hint">Give a kiss ðŸ’‹ and close your eyes for 10 seconds</div>

  <video id="v" autoplay muted playsinline></video>

  <!-- ðŸ‘‰ Teri photo -->
  <img id="me" src="myphoto.jpg">

  <!-- ðŸ’‹ static kiss -->
  <div id="kiss">ðŸ’‹</div>

  <!-- countdown overlay -->
  <div id="overlay">Keep eyes closedâ€¦ <span id="c">10</span></div>

  <button onclick="doKiss()">KISS ðŸ˜˜</button>
</div>

<script>
/*** âœ… TERA WHATSAPP NUMBER (country code ke saath) ***/
const WA_NUMBER = "918797117728";

const v = document.getElementById('v');
const kiss = document.getElementById('kiss');
const ov = document.getElementById('overlay');
const c  = document.getElementById('c');

let lipX = 700, lipY = 250;

/* Camera ON */
navigator.mediaDevices.getUserMedia({ video:true })
  .then(stream => v.srcObject = stream);

/* MediaPipe FaceMesh (lips detection) */
const fm = new FaceMesh({
  locateFile: f => `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${f}`
});
fm.setOptions({
  maxNumFaces:1,
  refineLandmarks:true
});

fm.onResults(res => {
  if(!res.multiFaceLandmarks) return;
  const face = res.multiFaceLandmarks[0];
  const upper = face[13];
  const lower = face[14];

  /* RIGHT side photo lips position */
  lipX = ((upper.x + lower.x) / 2) * 450 + 450;
  lipY = ((upper.y + lower.y) / 2) * 500;
});

const cam = new Camera(v,{
  onFrame: async () => await fm.send({ image:v }),
  width:450,
  height:500
});
cam.start();

/* Kiss action */
function doKiss(){
  /* ðŸ’‹ static lips pe */
  kiss.style.left = lipX + "px";
  kiss.style.top  = lipY + "px";
  kiss.style.display = "block";

  /* 10 sec eyes-closed illusion */
  ov.style.display = "flex";
  let t = 10;
  c.textContent = t;

  const timer = setInterval(()=>{
    t--;
    c.textContent = t;

    if(t <= 0){
      clearInterval(timer);

      /* Auto open WhatsApp app */
      location.href = `whatsapp://call?phone=${WA_NUMBER}`;

      /* Fallback (browser) */
      setTimeout(()=>{
        location.href = `https://wa.me/${WA_NUMBER}`;
      }, 800);
    }
  },1000);
}
</script>

</body>
</html>
