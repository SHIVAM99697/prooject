<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Kiss ðŸ’‹</title>

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

<style>
body{
  margin:0;
  background:#000;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Arial;
}

#box{
  position:relative;
  width:900px;
  height:500px;
}

video{
  position:absolute;
  left:0;
  width:450px;
  height:500px;
  object-fit:cover;
  transform:scaleX(-1);
}

#me{
  position:absolute;
  right:0;
  width:450px;
  height:500px;
  object-fit:cover;
}

#kiss{
  position:absolute;
  font-size:55px;
  display:none;
  filter:drop-shadow(0 0 12px hotpink);
}

button{
  position:absolute;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  padding:12px 30px;
  border:none;
  border-radius:30px;
  background:#ff2e63;
  color:white;
  font-size:18px;
  cursor:pointer;
}
</style>
</head>

<body>

<div id="box">
  <video id="video" autoplay muted></video>
  <img id="me" src="myphoto.jpg">
  <div id="kiss">ðŸ’‹</div>
  <button onclick="showKiss()">KISS ðŸ˜˜</button>
</div>

<script>
const video = document.getElementById("video");
const kiss = document.getElementById("kiss");

let lipX = 700, lipY = 250;

// camera on
navigator.mediaDevices.getUserMedia({video:true})
.then(stream => video.srcObject = stream);

// AI face mesh
const faceMesh = new FaceMesh({
  locateFile:file=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`
});

faceMesh.setOptions({
  maxNumFaces:1,
  refineLandmarks:true
});

// lips detect
faceMesh.onResults(results=>{
  if(!results.multiFaceLandmarks) return;

  const face = results.multiFaceLandmarks[0];
  const upper = face[13];
  const lower = face[14];

  // lips center (FIXED position)
  lipX = ((upper.x + lower.x)/2) * 450 + 450;
  lipY = ((upper.y + lower.y)/2) * 500;
});

// run AI
const camera = new Camera(video,{
  onFrame:async()=>{await faceMesh.send({image:video});},
  width:450,
  height:500
});
camera.start();

// show kiss (STATIC)
function showKiss(){
  kiss.style.left = lipX + "px";
  kiss.style.top  = lipY + "px";
  kiss.style.display = "block";
}
</script>

</body>
</html>
