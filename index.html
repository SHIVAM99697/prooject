<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Flying Kiss ðŸ’‹</title>

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

<style>
body{
  margin:0;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  overflow:hidden;
  font-family:Arial;
}

#container{
  position:relative;
  width:900px;
  height:500px;
}

video{
  position:absolute;
  width:450px;
  height:500px;
  left:0;
  object-fit:cover;
  transform:scaleX(-1);
}

#me{
  position:absolute;
  right:0;
  width:450px;
  height:500px;
  object-fit:cover;
}

#kiss{
  position:absolute;
  font-size:60px;
  pointer-events:none;
  filter:drop-shadow(0 0 18px hotpink);
  display:none;
}

.lip-hit{
  animation:lipPulse 0.9s ease-out;
}

@keyframes lipPulse{
  0%{transform:scale(0.2);opacity:0;}
  50%{transform:scale(1.5);opacity:1;}
  100%{transform:scale(1);opacity:1;}
}

button{
  position:absolute;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  padding:12px 35px;
  font-size:18px;
  border:none;
  border-radius:30px;
  background:#ff2e63;
  color:white;
  cursor:pointer;
}
</style>
</head>

<body>

<div id="container">
  <video id="video" autoplay></video>

  <!-- ðŸ‘‡ðŸ‘‡ðŸ‘‡ YAHAN TERI PHOTO -->
  <img id="me" src="myphoto.jpg">

  <div id="kiss">ðŸ’‹</div>

  <button onclick="dropKiss()">SEND KISS ðŸ˜˜</button>
</div>

<script>
const video=document.getElementById("video");
const kiss=document.getElementById("kiss");

let lipX=700, lipY=250;

const faceMesh=new FaceMesh({
  locateFile:file=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`
});

faceMesh.setOptions({
  maxNumFaces:1,
  refineLandmarks:true,
  minDetectionConfidence:0.6,
  minTrackingConfidence:0.6
});

faceMesh.onResults(results=>{
  if(results.multiFaceLandmarks){
    const face=results.multiFaceLandmarks[0];

    const upper=face[13];
    const lower=face[14];

    lipX=((upper.x+lower.x)/2)*450+450;
    lipY=((upper.y+lower.y)/2)*500;
  }
});

const camera=new Camera(video,{
  onFrame:async()=>{await faceMesh.send({image:video});},
  width:450,
  height:500
});
camera.start();

function dropKiss(){
  kiss.style.display="block";
  kiss.style.left=lipX+"px";
  kiss.style.top=lipY+"px";
  kiss.classList.remove("lip-hit");
  void kiss.offsetWidth;
  kiss.classList.add("lip-hit");
}
</script>

</body>
</html>
